require('dotenv').config({ path: '.env.local' })
const { createClient } = require('@supabase/supabase-js')

const supabase = createClient(
	process.env.NEXT_PUBLIC_SUPABASE_URL,
	process.env.SUPABASE_SERVICE_ROLE_KEY
)

async function updateMaterial142() {
	// First, check current content
	const { data: current, error: fetchError } = await supabase
		.from('materials')
		.select('id, title, content, lang, section')
		.eq('id', 142)
		.single()

	if (fetchError) {
		console.error('Error fetching material:', fetchError)
		return
	}

	console.log('Current material 142:')
	console.log('Title:', current.title)
	console.log('Language:', current.lang)
	console.log('Section:', current.section)
	console.log('Current content length:', current.content?.length || 0)
	console.log('\n---\n')

	// Add rich Russian text content for testing
	const newContent = `Москва́ — столица Российской Федерации, город федерального значения, административный центр Центрального федерального округа и центр Московской области, в состав которой не входит.

Крупнейший по численности населения город России и её субъект — 13 097 539 человек, самый населённый из городов, полностью расположенных в Европе, входит в первую десятку городов мира по численности населения, крупнейший русскоязычный город в мире.

История Москвы

Москва была основана на высоком Боровицком холме, в месте слияния Москвы-реки и реки Неглинной, выше реки Яузы. Первое письменное упоминание о Москве относится к 1147 году.

Современная Москва

Сегодня Москва является важнейшим транспортным узлом, а также политическим, экономическим, культурным и научным центром страны. В городе находится международный аэропорт Шереметьево, один из крупнейших аэропортов России и мира.

Достопримечательности

В Москве находятся федеральные органы государственной власти Российской Федерации, посольства иностранных государств, штаб-квартиры большинства крупнейших российских коммерческих организаций и общественных объединений.

Красная площадь — главная площадь Москвы, расположенная в центре радиально-кольцевой планировки города между Московским Кремлём и Китай-городом. На площади расположены Лобное место, памятник Минину и Пожарскому, Мавзолей В. И. Ленина, рядом с которым находится Некрополь у Кремлёвской стены.

Кремль — древнейшая часть Москвы, главный общественно-политический и историко-художественный комплекс города, официальная резиденция Президента Российской Федерации.

Культура и образование

Москва — крупнейший в общероссийском масштабе финансовый центр, международный деловой центр и центр управления большой частью экономики страны. На долю города приходится значительная часть валового внутреннего продукта России.

В городе находятся множество музеев мирового значения: Третьяковская галерея, Музей изобразительных искусств имени А. С. Пушкина, Исторический музей. Москва является одним из важнейших туристических центров России.

Московский государственный университет имени М. В. Ломоносова — один из старейших и крупнейших университетов России, один из центров отечественной науки и культуры, расположенный в Москве.`

	// Update the material
	const { data: updated, error: updateError } = await supabase
		.from('materials')
		.update({ content: newContent })
		.eq('id', 142)
		.select()

	if (updateError) {
		console.error('Error updating material:', updateError)
		return
	}

	console.log('✓ Material 142 updated successfully!')
	console.log('New content length:', newContent.length)
	console.log('Preview:', newContent.substring(0, 200) + '...')
}

updateMaterial142()
